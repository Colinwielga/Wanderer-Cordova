<!DOCTYPE html>
<html data-ng-app="wandererApp">
<head>
    <!--
        Customize the content security policy in the meta tag below as needed. Add 'unsafe-inline' to default-src to enable inline JavaScript.
        For details, see http://go.microsoft.com/fwlink/?LinkID=617521
    -->
    <!--<meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: https://ssl.gstatic.com 'unsafe-eval'; style-src 'self' 'unsafe-inline'; media-src *">-->

    <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: https://ssl.gstatic.com 'unsafe-eval'; style-src 'self' 'unsafe-inline'; media-src *; connect-src 'self' https://dynamodb.us-east-1.amazonaws.com/ ">

    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
    <link rel="stylesheet" type="text/css" href="css/index.css">
    <link rel="stylesheet" type="text/css" href="External/textAngular/dist/textAngular.css">
    <link href="External/font-awesome-4.7.0/css/font-awesome.css" rel="stylesheet" />
     <!-- module css -->
    <!--<link href="modules/colin-wielga-cards/stylesheet.css" rel="stylesheet" />-->
    <!--<link rel="stylesheet" type="text/css" href="css/newStyle.css">-->
    <title>Wanderer</title>

    <!-- externals -->
    <script src="External/angular.min.js"></script>
    <script src="External/angular-sanitize.min.js"></script>
    <script src="External/jquery-3.1.0.min.js"></script>
    <script src="External/aws-sdk.js"></script>
    <script src="External/markdown.min.js"></script>
    <script src="External/d3.v4.min.js"></script>
    <script src="External/textAngular/dist/textAngular-rangy.min.js"></script>
    <script src="External/textAngular/dist/textAngular-sanitize.min.js"></script>
    <script src="External/textAngular/dist/textAngular.min.js"></script>
</head>
<body data-ng-controller="wandererController">
    <div id="all">
        <div id="page-header" class="pad-me">
            <span data-ng-repeat="character in Characters">
                <input                      
                    class="left-part"                   
                    data-ng-disabled="Selected(character)"
                    data-ng-click="Select(character)"
                    value="{{character.displayName()}}" 
                    type="button" /><input data-ng-click="Close(character)"
                       class="right-part"    
                       value="x"
                       type="button" />
            </span>
            <input data-ng-click="Add()"
                   type="button"
                   value="+" />
            <!--<h1>Wanderer</h1>-->
            <!--<input type="checkbox" id="show-settings" name="show settings" value="show settings" />-->
        </div>

        <div></div>
        <!--<div id="settings" ></div>-->


        <div id="content">
            <!--draggable="true"-->
            <div data-ng-repeat="module in activeCharacter.modules()" >
                <div id="{{module.getId()}}" class="drag section">
                    <div class="section-header">
                        <label class="hide-button" data-ng-click="activeCharacter.Remove(module)">x</label>
                        <label class="hide-button" for="{{module.getId()}}-hide">-</label>
                        <label class="hide-button" for="{{module.getId()}}-help-hide">?</label>
                        <h2 class="section-title">{{module.getTitle()}}</h2>
                    </div>
                    <div id="{{module.getId()}}">
                        <input type="checkbox" class="hide-check" id="{{module.getId()}}-hide" />
                        <div class="section-body fixed-content">
                            <input type="checkbox" class="hide-help-check" id="{{module.getId()}}-help-hide" checked/>
                            <div class="rules-container">
                                <div data-ng-include="module.getRulesHtml()" class="pad-me"></div>
                            </div>
                            <div class="loggin-container">
                                <div data-ng-repeat="log in module.injected.logger.displayLogs()">
                                    {{log.message}}
                                    <input type="button" value="x" data-ng-click="log.closed = true" />
                                </div>
                            </div>
                            <div data-ng-show="module.injected.dataManager.remote != null"> 
                                showing local:
                                <input type="button" value="{{module.injected.dataManager.useLocal}}" data-ng-click="activeCharacter.swap(module)" />
                            </div>
                            <div data-ng-include="module.getHmtl()"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- hack? atleast very ugly -->
    <p style="visibility:hidden">{{onUpdate()}}</p>

    <scripts>
        <!-- cordova stuff goes first -->
        <script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript" src="scripts/platformOverrides.js"></script>
        <script type="text/javascript" src="scripts/appBundle.js"></script>

        <!-- some stuff the modules need -->
        <script src="scripts/g.js"></script>
        <script src="scripts/constants.js"></script>
        <script src="scripts/ComponetRegistry.js"></script>
        <script src="scripts/Character.js"></script>

        <script src="modules/wanderer-core-logger/script.js"></script>
        <script src="modules/colin-wielga-skill-web/script.js"></script>
        <script src="modules/wanderer-core-modules/script.js"></script> 
        <script src="modules/colin-wielga-cards/namespace.js"></script>
        <script src="modules/colin-wielga-cards/Deck.js"></script>
        <script src="modules/colin-wielga-cards/Card.js"></script>
        <script src="modules/colin-wielga-cards/TitanagonCard.js"></script> 
        <script src="modules/colin-wielga-cards/script.js"></script>
        <script src="modules/colin-wielga-description/script.js"></script>
        <script src="modules/colin-wielga-counters/script.js"></script>
        <script src="modules/colin-wielga-notes/script.js"></script>
        <script src="modules/colin-wielga-roll/roll.js"></script>
        <script src="modules/colin-wielga-roll/script.js"></script>
        <script src="modules/colin-wielga-tools/script.js"></script>
        <script src="modules/colin-wielga-dynamo-save/AWSConnector.js"></script>
        <script src="modules/colin-wielga-dynamo-save/namespace.js"></script>
        <script src="modules/colin-wielga-dynamo-save/script.js"></script>
        <script src="modules/tote-hughes-titanagon-cards/TitanagonCard.js"></script>
        <script src="modules/tote-hughes-titanagon-cards/script.js"></script>
        <script src="modules/tote-hughes-questions/Questions.js"></script>
        <script src="modules/tote-hughes-questions/script.js"></script>
        <script src="modules/tote-hughes-skill-web-graph/script.js"></script>
        <script src="modules/dc-humours-sliders/script.js"></script>

        <!-- stuff that goes after the modules -->
        <script src="scripts/wandererController.js"></script>
    </scripts>

</body>
</html>
